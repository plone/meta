
[test_runner]
{% if test_runner == "pytest" %}
deps =
    pytest
{% if use_pytest_plone %}    pytest-plone
{% endif %}
test =
{% if prime_robotframework %}
    rfbrowser init
{% endif %}
    pytest --disable-warnings {posargs} {toxinidir}%(test_path)s
coverage =
{% if prime_robotframework %}
    rfbrowser init
{% endif %}
    coverage run --source %(package_name)s -m pytest  {posargs} --disable-warnings {toxinidir}%(test_path)s
    coverage report -m --format markdown
    coverage xml
    coverage html
{% else %}
deps = zope.testrunner
test =
{% if prime_robotframework %}
    rfbrowser init
{% endif %}
    zope-testrunner --all --test-path={toxinidir}%(test_path)s -s %(package_name)s {posargs}
coverage =
{% if prime_robotframework %}
    rfbrowser init
{% endif %}
    coverage run --branch --source %(package_name)s {envbindir}/zope-testrunner --quiet --all --test-path={toxinidir}%(test_path)s -s %(package_name)s {posargs}
    coverage report -m --format markdown
    coverage xml
    coverage html
{% endif %}
